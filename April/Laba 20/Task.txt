Модифицируйте программу упр. 18 так, чтобы вместо мьютекса использовалась блокировка чтения-записи.